
<h2 class="form-head">{{action}} d'un tournoi</h2>
<form id="formTournoi" name="formTournoi">
    <div class="row">
    	<div class="col-md-12">
		    <div class="form-group">
		    	<label>Type de tournoi</label>
		    	<select class="form-control" name="typeTournoi">
		    		<option disabled="disabled" value="" selected>--Selectionner type de tournoi--</option>
		    		{% for item in typeTournois %}
		    			<option value="{{item.id}}">{{item.nom}}</option>
		    		{% endfor %}
		    	</select>
		    </div>
		</div>
		<div class="col-md-12">
		    <div class="form-group">
		    	<label>Nom</label>
		        <input type="text" name="nom" class="form-control" placeholder="nom" value="">
		    </div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
		    <div class="form-group">
		    	<label>Nombre d'equipe</label>
		        <input type="number" name="nbrEquipe" class="form-control" placeholder="nombre equipe" value="">
		    </div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
		    <div class="form-group">
		    	<label>Nombre de terrain</label>
		        <input type="number" name="nbrTerrain" class="form-control" placeholder="nombre terrain" value="">
		    </div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
		    <div class="form-group">
		    	<label>Durée du tournoi en minute</label>
		        <input type="number" name="duree" class="form-control" placeholder="durrée en minute" value="">
		    </div>
		</div>
	</div>
    <button class="submit">Enregistrer</button>
</form>
<script type="text/javascript">

	$(document).ready(function(){
		var form = document.forms.namedItem("formTournoi");
		function validate(){
	        try{
	            var validator = $('#formTournoi').validate({
	                rules:{
	                    'typeTournoi':{
	                    	required:true
	                    },
	                    'nom':{
	                    	required:true
	                    },
	                    'nbrEquipe':{
	                    	required:true,
	                    	number: true
	                    },
	                    'nbrTerrain':{
	                    	required:true,
	                    	number: true
	                    },
	                    'duree':{
	                    	required:true,
	                    	number: true
	                    },
	                }
	            });
	            
	            var $validated = $('#formTournoi').valid();
	            return $validated;
	        }catch(error){
	            console.log(error)
	        }
	    }
		form.addEventListener('submit', function(ev) {
			if( !validate()){
				demo.showNotification.error("Veuillez remplir correctement les champs");
		        ev.preventDefault();
		        return false;
		    }
			$('.lds-ripple').css('display', 'block');
			$.ajax({
		        url:"{{url}}",
		        type:"POST",
		        data:$('#formTournoi').serialize(),
		        success:function(response) {
		        	$('#formTournoi')[0].reset();
		        	$('.lds-ripple').css('display', 'none');
		        	$(".success-checkmark").show().delay(3000).fadeOut();
                	$(".check-icon").show().show().delay(3000).fadeOut();
                	demo.showNotification.success("Enregistrement effectué avec success");
                	location.reload(true);
		        },
		        error:function(){
		        	demo.showNotification.error("echec enregistrement");
		        	$('.lds-ripple').css('display', 'none');
			    }
		   	});
				
			ev.preventDefault();
		}, false);
	});
</script>